<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Weekenboodschappen</title>
  <style>
    :root {
      --bg: #f1f5f9;
      --card: #ffffff;
      --primary: #0f766e; /* teal green */
      --primary-hover: #14b8a6; /* brighter aqua-teal for clearer hover */
      --accent: #7c3aed; /* purple */
      --danger: #ef4444;
      --text: #0f172a;
      --muted: #64748b;
      --radius: 16px;
    }

    body { 
      font-family: 'Inter', system-ui, sans-serif; 
      margin: 0; 
      background: var(--bg); 
      color: var(--text);
      display:flex;
      justify-content:center;
      padding:20px;
      position:relative;
      overflow:hidden;
    }
    body::before, body::after {
      content:'';
      position:absolute;
      border-radius:50%;
      z-index:0;
      opacity:0.2;
    }
    body::before {
      width:300px; height:300px;
      background:var(--accent);
      top:-120px; left:-120px;
    }
    body::after {
      width:220px; height:220px;
      background:var(--primary);
      bottom:-100px; right:-100px;
    }

    .app {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      max-width: 420px;
      width:100%;
      padding: 24px;
      display:flex;
      flex-direction:column;
      gap:20px;
      position:relative;
      z-index:1;
    }
    h1 { margin:0; font-size: 22px; font-weight:700; color:var(--primary); }
    p { margin:0; color:var(--muted); font-size:14px; }

    .pill-row { display:flex; flex-wrap:wrap; gap:10px; }
    button { 
      padding:10px 16px; 
      border:none; 
      border-radius: var(--radius);
      cursor:pointer; 
      background:var(--primary); 
      color:white; 
      font-weight:600; 
      font-size:14px;
      transition: background .2s ease, transform .1s ease;
    }
    button:hover { background:var(--primary-hover); transform:translateY(-1px); }
    .active { background:var(--accent); }

    .list { margin-top:0; background: #f8fafc; border-radius: var(--radius); padding: 16px; }
    ul { margin:0; padding:0; }
    li { list-style:none; margin-bottom:10px; background:white; border-radius: var(--radius); padding:10px 12px; display:flex; align-items:center; justify-content:space-between; box-shadow:0 1px 3px rgba(0,0,0,0.05); }
    li input { margin-right:8px; }
    li.checked { background:#f1f5f9; }
    li.checked label { text-decoration: line-through; color:var(--muted); }
    label { display:flex; align-items:center; flex:1; }
    small { color: var(--muted); margin-left:6px; font-size:12px; }

    .actions { display:flex; justify-content:space-between; align-items:center; }
    #clear { background:transparent; color:var(--danger); font-size:13px; font-weight:500; padding:6px 10px; box-shadow:none; }
    #clear:hover { text-decoration:underline; background:transparent; }
    #mealCounter { font-size:13px; color:var(--muted); margin-bottom:10px; display:block; }
  </style>
</head>
<body>
  <div class="app">
    <div>
      <h1>ðŸ›’ Weekly Grocery List</h1>
      <p>Select meals and essentials. Tap again to remove.</p>
    </div>

    <div>
      <strong>Meals</strong>
      <div class="pill-row" id="mealPills">
        <button onclick="toggleMeal('Pizza', this)">Pizza</button>
        <button onclick="toggleMeal('Sticky Tofu', this)">Sticky Tofu</button>
        <button onclick="toggleMeal('Stamppot Spinazie', this)">Stamppot Spinazie</button>
        <button onclick="toggleMeal('Pasta', this)">Pasta</button>
      </div>
    </div>

    <div>
      <strong>Weeklies</strong>
      <div class="pill-row">
        <button onclick="toggleWeekly('Toilet Paper', this)">Toilet Paper</button>
        <button onclick="toggleWeekly('Soap', this)">Soap</button>
        <button onclick="toggleWeekly('Detergent', this)">Detergent</button>
      </div>
    </div>

    <span id="mealCounter">You've selected meals for 0 days</span>

    <ul id="list" class="list"></ul>

    <div class="actions">
      <button id="clear" onclick="clearList()">Clear list</button>
    </div>
  </div>

  <script>
    const mealData = {
      'Pizza': ['Pizzadeeg','Gesneden champignons','Paprika','Paprika','Rode ui','Tapenade','Cashewnoten'],
      'Sticky Tofu': ['Tofu','Brocolli','Rijst azijn','Maizena','Sojasaus','Knoflook'],
      'Stamppot Spinazie': ['Burger','Kruimige aardappelen','Spinazie fijn diepvries'],
      'Pasta': ['Paprika','Paprika','Gehakt','Winterpeen','Tomatenpuree','Cherry tomaten blik','Saus zongedroogde tomaat','Ui wit','Knoflook']
    };

    const listEl = document.getElementById('list');
    const mealCounterEl = document.getElementById('mealCounter');
    const STORE_LIST = 'weekly-grocery-list';
    const STORE_SELECTED = 'weekly-grocery-selected-meals';

    function saveState() {
      localStorage.setItem(STORE_LIST, listEl.innerHTML);
      const selected = [...document.querySelectorAll('#mealPills button.active')].map(b => b.textContent.trim());
      localStorage.setItem(STORE_SELECTED, JSON.stringify(selected));
      updateMealCounter();
    }

    function loadState() {
      const saved = localStorage.getItem(STORE_LIST);
      if(saved) {
        listEl.innerHTML = saved;
        attachEvents();
      }
      const selectedMeals = JSON.parse(localStorage.getItem(STORE_SELECTED) || '[]');
      document.querySelectorAll('#mealPills button').forEach(btn => {
        if(selectedMeals.includes(btn.textContent.trim())) btn.classList.add('active');
      });
      updateMealCounter();
    }

    function renderLi(li) {
      const item = li.dataset.item;
      const count = parseInt(li.dataset.count || '1', 10);
      const origins = (li.dataset.origins || '').split('|').filter(Boolean);
      const countText = count > 1 ? ` (${count}x)` : '';
      const originText = origins.length ? ` <small>(from ${origins.join(', ')})</small>` : '';
      li.innerHTML = `<label><input type='checkbox'> ${item}${countText}${originText}</label>`;
    }

    function addMeal(meal) {
      mealData[meal].forEach(item => {
        let li = [...listEl.querySelectorAll('li')].find(li => li.dataset.item === item);
        if(li) {
          let count = parseInt(li.dataset.count || '1', 10) + 1;
          li.dataset.count = count;
          const origins = (li.dataset.origins || '').split('|').filter(Boolean);
          if(!origins.includes(meal)) origins.push(meal);
          li.dataset.origins = origins.join('|');
          renderLi(li);
        } else {
          li = document.createElement('li');
          li.dataset.item = item;
          li.dataset.count = 1;
          li.dataset.origins = meal;
          renderLi(li);
          listEl.appendChild(li);
        }
      });
      attachEvents();
      saveState();
    }

    function removeMeal(meal) {
      mealData[meal].forEach(item => {
        const li = [...listEl.querySelectorAll('li')].find(li => li.dataset.item === item);
        if(!li) return;
        let count = parseInt(li.dataset.count || '1', 10);
        const origins = (li.dataset.origins || '').split('|').filter(Boolean);
        if(origins.includes(meal)) {
          count = Math.max(0, count - 1);
          li.dataset.count = count;
          const newOrigins = origins.filter(o => o !== meal);
          li.dataset.origins = newOrigins.join('|');
          if(count <= 0 || newOrigins.length === 0) {
            li.remove();
          } else {
            renderLi(li);
          }
        }
      });
      saveState();
    }

    function addWeekly(item) {
      let li = [...listEl.querySelectorAll('li')].find(li => li.dataset.item === item);
      if(!li) {
        li = document.createElement('li');
        li.dataset.item = item;
        li.dataset.count = 1;
        li.dataset.origins = 'Weekly';
        renderLi(li);
        listEl.appendChild(li);
      }
      attachEvents();
      saveState();
    }

    function removeWeekly(item) {
      const li = [...listEl.querySelectorAll('li')].find(li => li.dataset.item === item);
      if(li) li.remove();
      saveState();
    }

    function toggleMeal(meal, btnEl) {
      const isActive = btnEl.classList.toggle('active');
      if(isActive) addMeal(meal); else removeMeal(meal);
    }

    function toggleWeekly(item, btnEl) {
      const isActive = btnEl.classList.toggle('active');
      if(isActive) addWeekly(item); else removeWeekly(item);
    }

    function clearList() {
      listEl.innerHTML = '';
      document.querySelectorAll('button').forEach(b => b.classList.remove('active'));
      saveState();
    }

    function attachEvents() {
      listEl.querySelectorAll('li input').forEach(input => {
        input.onchange = () => {
          if(input.checked) {
            input.closest('li').classList.add('checked');
          } else {
            input.closest('li').classList.remove('checked');
          }
          saveState();
        };
      });
    }

    function updateMealCounter() {
      const count = document.querySelectorAll('#mealPills button.active').length;
      mealCounterEl.textContent = `You've selected meals for ${count} day${count !== 1 ? 's' : ''}`;
    }

    loadState();
  </script>
</body>
</html>
