<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <link rel="stylesheet" href="./styles.css" />
    <link rel="icon" href="data:," />
    <title>Weekboodschappen</title>

    <!-- ✅ Single set of Firebase compat SDKs (v10) -->
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore-compat.js"></script>
    
    <script type="module" src="./main.js"></script>

    
</head>
<body>
    <div class="app">
        <h1>Weekboodschappen</h1>

        <!-- TAB: LIST (current UI) -->
        <section id="tab-list" class="tabpage active">
            <!-- ⬇️ KEEP your existing List UI inside this section ⬇️ -->
            <ul class="shopping-list" id="shoppingList"></ul>

            <!-- Your existing FAB & Clear button stay here (only relevant on List tab) -->
            <button id="fabAdd" class="fab" title="Item toevoegen">＋</button>
            <!-- Bottom-sheet composer (new) -->
            <div id="composer" aria-hidden="true">
              <div class="sheet__scrim" id="sheetScrim" tabindex="-1" aria-hidden="true"></div>
              <div class="sheet__panel" role="dialog" aria-labelledby="sheetTitle" aria-modal="true">
              <div class="sheet__handle" aria-hidden="true"></div>
              <h2 id="sheetTitle" class="sr-only">Item toevoegen</h2>

              <!-- 1) MEALS (top) -->
              <section id="modalMeals" class="section" aria-label="Maaltijden">
                <h3 class="section-label">🍲 Maaltijden</h3>
                <div class="meal-row" id="mealRowModal"></div>
              </section>

              <!-- 2) SUGGESTIONS (middle) -->
              <section id="modalSuggestions" class="section" aria-label="Suggesties & Favorieten">
                <h3 class="section-label">🔍 Suggesties &amp; Favorieten</h3>
                <ul id="suggestions" class="suggestions"></ul>
              </section>

              <!-- 3) INPUT (bottom) -->
              <form id="addForm" class="sheet__form" autocomplete="off">
                <label for="addInput" class="sr-only">Voeg item toe</label>
                <input id="addInput" type="text" inputmode="text" placeholder="Bijv. melk 2L of 3x bananen" />

                <!-- Parsed tokens (qty/unit/section chips) -->
                <div id="parsedChips" class="parsed-chips" aria-live="polite" aria-atomic="true"></div>

                <div class="sheet__actions">
                  <button type="button" id="addConfirm" class="btn btn-primary">Toevoegen</button>
                  <button type="button" id="sheetClose" class="btn btn-ghost">Sluiten</button>
                </div>
              </form>
            </div>
            </div>

            <button id="clearListBtn" class="clear-list">🗑️ Lijst leegmaken</button>
        </section>

        <!-- TAB: RECIPES (placeholder for M3) -->
        <section id="tab-recipes" class="tabpage">
            <div class="recipes-toolbar">
                <h2 style="margin: 0;">🍳 Recepten</h2>
                <button id="newRecipeBtn" class="btn primary">Nieuw recept</button>
            </div>
            <div id="recipesList" class="recipes-grid"></div>
        </section>

        <!-- Recipe editor dialog -->
        <dialog id="recipeDialog">
            <form method="dialog" id="recipeForm" class="recipe-form">
                <h3 style="margin: 0;">Recept</h3>
                <input id="recipeNameInput" type="text" placeholder="Receptnaam (bijv. Pasta Arrabiata)" />
                <textarea id="recipeItemsInput" rows="5" placeholder="Ingrediënten (gescheiden door komma of nieuwe regel)"></textarea>
                <div class="ing-suggestions" id="ingSuggestions"></div>
                <div class="recipe-dialog-actions">
                    <button type="button" id="recipeDeleteBtn" class="btn danger" style="margin-right: auto; display: none;">Verwijderen</button>
                    <button value="cancel" type="button" id="recipeCancelBtn" class="btn ghost">Annuleren</button>
                    <button value="ok" id="recipeSaveBtn" class="btn primary">Opslaan</button>
                </div>
            </form>
        </dialog>

        <!-- TAB: STORES -->
        <section id="tab-stores" class="tabpage">
            <div class="section__body" style="padding: 16px;">
                <h2 style="margin: 0 0 8px;">🏬 Winkels</h2>
                <p style="color: #64748b; margin: 0;">Hier beheer je winkelprofielen, stel je een actieve winkel in en pas je de categorievolgorde aan.</p>
            </div>
        </section>

      <!-- TAB: ITEMS (catalog manager) -->
        <section id="tab-items" class="tabpage">
          <div class="section__body" style="padding:16px;">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;">
              <h2 style="margin:0;">🥕 Ingrediënten</h2>
              <button id="itemAddBtn" class="btn primary">Nieuw ingrediënt</button>
              </div>
              <input id="itemSearch" type="search" placeholder="Zoek of voeg toe…" style="width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:10px;margin:0 0 12px;">
            <div id="itemsGrid" class="stores-grid" style="display:grid;gap:12px;padding:0;"></div>
            </div>
        </section>

        <!-- Bottom tab bar -->
        <nav class="tabbar" role="tablist" aria-label="Navigatie">
          <button id="tabbtn-list" role="tab" aria-controls="tab-list"><span>📝</span>Lijst</button>
          <button id="tabbtn-recipes" role="tab" aria-controls="tab-recipes"><span>🍳</span>Recepten</button>

          <!-- ⋮ overflow (bottom-sheet style) -->
          <div class="overflow">
            <button id="overflowBtn" aria-haspopup="menu" aria-expanded="false" aria-controls="overflowPanel" title="Meer">⋮</button>

            <!-- Bottom-sheet style panel -->
            <div id="overflowPanel" class="overflow-panel" role="menu" aria-label="Meer acties">
              <ul class="overflow-list">
                <li role="menuitem"><button id="miManageIngredients">🥕 Ingrediënten beheren</button></li>
                <li role="menuitem"><button id="miStores">🏬 Winkels</button></li>
                <!-- future options go here -->
                <!-- <li role="menuitem"><button>⚙️ Instellingen</button></li> -->
              </ul>

              <!-- Integrated FAB action -->
              <div class="overflow-fab">
                <button id="fabInOverflow" class="btn primary overflow-fab-btn" title="Item toevoegen">＋ Item toevoegen</button>
              </div>
            </div>
          </div>

        <div id="snackbar"></div>

    <!-- ARIA live announcements -->
    <div id="ariaLive" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>
</body>
</html>
