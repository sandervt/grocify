<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    
    <link rel="stylesheet" href="./styles.css" />
    <link rel="icon" href="data:," />
    <title>Weekboodschappen</title>

    <!-- ‚úÖ Single set of Firebase compat SDKs (v10) -->
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore-compat.js"></script>
    
    <script type="module" src="./main.js"></script>

    
</head>
<body>
    <div class="app">
        <h1>Weekboodschappen</h1>

        <!-- TAB: LIST (current UI) -->
        <section id="tab-list" class="tabpage active">
            <!-- ‚¨áÔ∏è KEEP your existing List UI inside this section ‚¨áÔ∏è -->

            <details id="sec-meals" class="section" open>
                <summary>
                    <span class="section__chev">‚ñº</span> üç≤ Maaltijden
                    <span id="mealCounter" class="section__badge">0 dagen</span>
                </summary>
                <div class="section__body">
                    <div class="meal-row" id="mealRow"></div>
                </div>
            </details>

            <details id="sec-weeklies" class="section" open>
                <summary>
                    <span class="section__chev">‚ñº</span> üì¶ Weekboodschappen
                    <span id="weeklyCounter" class="section__badge">0 items</span>
                </summary>
                <div class="section__body">
                    <div id="weeklyAccordion" class="weekly-accordion"></div>
                </div>
            </details>

            <ul class="shopping-list" id="shoppingList"></ul>

            <!-- Your existing FAB & Clear button stay here (only relevant on List tab) -->
            <button id="fabAdd" class="fab" title="Item toevoegen">Ôºã</button>
            <!-- Bottom-sheet composer (new) -->
            <div id="composer" aria-hidden="true">
              <div class="sheet__scrim" id="sheetScrim" tabindex="-1" aria-hidden="true"></div>
              <div class="sheet__panel" role="dialog" aria-labelledby="sheetTitle" aria-modal="true">
                <div class="sheet__handle" aria-hidden="true"></div>
                <h2 id="sheetTitle" class="sr-only">Item toevoegen</h2>

                <!-- Your existing add UI lives here, IDs preserved -->
                <form id="addForm" class="sheet__form" autocomplete="off">
                  <label for="addInput" class="sr-only">Voeg item toe</label>
                  <input id="addInput" type="text" inputmode="text" placeholder="Bijv. melk 2L of 3x bananen" />
                  
                  <!-- Parsed tokens (STEP-4) -->
                  <div id="parsedChips" class="parsed-chips" aria-live="polite" aria-atomic="true"></div>
                  
                  <ul id="suggestions" class="suggestions"></ul>

                  <div class="sheet__actions">
                    <button type="button" id="addConfirm" class="btn btn-primary">Toevoegen</button>
                    <button type="button" id="sheetClose" class="btn btn-ghost">Sluiten</button>
                  </div>
                </form>
              </div>
            </div>

            <button id="clearListBtn" class="clear-list">üóëÔ∏è Lijst leegmaken</button>
        </section>

        <!-- TAB: RECIPES (placeholder for M3) -->
        <section id="tab-recipes" class="tabpage">
            <div class="recipes-toolbar">
                <h2 style="margin: 0;">üç≥ Recepten</h2>
                <button id="newRecipeBtn" class="btn primary">Nieuw recept</button>
            </div>
            <div id="recipesList" class="recipes-grid"></div>
        </section>

        <!-- Recipe editor dialog -->
        <dialog id="recipeDialog">
            <form method="dialog" id="recipeForm" class="recipe-form">
                <h3 style="margin: 0;">Recept</h3>
                <input id="recipeNameInput" type="text" placeholder="Receptnaam (bijv. Pasta Arrabiata)" />
                <textarea id="recipeItemsInput" rows="5" placeholder="Ingredi√´nten (gescheiden door komma of nieuwe regel)"></textarea>
                <div class="ing-suggestions" id="ingSuggestions"></div>
                <div class="recipe-dialog-actions">
                    <button type="button" id="recipeDeleteBtn" class="btn danger" style="margin-right: auto; display: none;">Verwijderen</button>
                    <button value="cancel" type="button" id="recipeCancelBtn" class="btn ghost">Annuleren</button>
                    <button value="ok" id="recipeSaveBtn" class="btn primary">Opslaan</button>
                </div>
            </form>
        </dialog>

        <!-- TAB: STORES (placeholder for M4) -->
        <section id="tab-stores" class="tabpage">
            <div class="section__body" style="padding: 16px;">
                <h2 style="margin: 0 0 8px;">üè¨ Winkels</h2>
                <p style="color: #64748b; margin: 0;">Hier beheer je winkelprofielen en categorievolgorde (M4).</p>
            </div>
        </section>

        <!-- Bottom tab bar -->
        <nav class="tabbar" role="tablist" aria-label="Navigatie">
            <button id="tabbtn-list" role="tab" aria-controls="tab-list"><span>üìù</span>Lijst</button>
            <button id="tabbtn-recipes" role="tab" aria-controls="tab-recipes"><span>üç≥</span>Recepten</button>
            <button id="tabbtn-stores" role="tab" aria-controls="tab-stores"><span>üè¨</span>Winkels</button>
        </nav>
    </div>
    <!-- ARIA live announcements -->
    <div id="ariaLive" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>
</body>
</html>
